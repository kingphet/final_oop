classDiagram
    class Person {
        <<abstract>>
        -String id
        -String name
        -String phone
        -String address
        +getId() String
        +getName() String
        +getPhone() String
        +getAddress() String
    }

    class Customer {
        -List~Invoice~ invoices
        +addInvoice(Invoice)
        +getInvoices() List
        +getTotalPurchases() double
    }

    class Product {
        -String productId
        -String name
        -double price
        -int stockQuantity
        +getProductId() String
        +getName() String
        +getPrice() double
        +getStockQuantity() int
        +updateStock(int)
    }

    class Invoice {
        -String invoiceId
        -Customer customer
        -List~InvoiceItem~ items
        -Date date
        -double totalAmount
        +addItem(Product, int)
        +removeItem(InvoiceItem)
        +calculateTotal()
        +calculateTax() double
    }

    class InvoiceItem {
        -Product product
        -int quantity
        -double subtotal
        +calculateSubtotal()
        +getProduct() Product
        +getQuantity() int
        +getSubtotal() double
    }

    class StoreManager {
        -List~Product~ products
        -List~Customer~ customers
        -List~Invoice~ invoices
        +addProduct(Product)
        +removeProduct(String)
        +findProduct(String)
        +addCustomer(Customer)
        +removeCustomer(String)
        +findCustomer(String)
        +createInvoice(String)
    }

    Person <|-- Customer
    Customer "1" -- "*" Invoice
    Invoice "1" -- "*" InvoiceItem
    InvoiceItem "*" -- "1" Product
    StoreManager -- "*" Product
    StoreManager -- "*" Customer
    StoreManager -- "*" Invoice


_________________________________________
sequenceDiagram
    actor Cashier
    participant UI
    participant StoreManager
    participant Customer
    participant Invoice
    participant Product

    Cashier->>UI: ເລືອກສ້າງ Invoice ໃໝ່
    UI->>StoreManager: createInvoice(customerId)
    StoreManager->>Customer: ກວດສອບລູກຄ້າ
    Customer-->>StoreManager: ຢືນຢັນລູກຄ້າ
    StoreManager->>Invoice: ສ້າງ Invoice ໃໝ່

    loop ເພີ່ມສິນຄ້າ
        Cashier->>UI: ເລືອກສິນຄ້າ + ຈຳນວນ
        UI->>StoreManager: findProduct(productId)
        StoreManager->>Product: ກວດສອບສິນຄ້າ
        Product-->>StoreManager: ຂໍ້ມູນສິນຄ້າ
        StoreManager->>Invoice: addItem(product, quantity)
        Invoice->>Product: updateStock(-quantity)
        Product-->>Invoice: ອັບເດດສຳເລັດ
        Invoice-->>UI: ສະແດງລາຍການ
    end

    Cashier->>UI: ຢືນຢັນການຂາຍ
    UI->>Invoice: calculateTotal()
    Invoice-->>UI: ສະແດງຍອດລວມ
    UI->>StoreManager: ບັນທຶກການຂາຍ
    StoreManager->>Customer: addInvoice(invoice)
    Customer-->>UI: ສຳເລັດ


open this web https://www.mermaidchart.com/